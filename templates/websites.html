{% extends "base.html" %}

{% block title %}Sitelerim{% endblock %}

{% block content %}
<div class="card">
    <h1>ğŸŒ Sitelerim</h1>
    <a href="/create-site" class="btn btn-success">â• Yeni Site</a>

    {% if websites %}
    <table class="table">
        <thead>
            <tr>
                <th>Site AdÄ±</th>
                <th>URL</th>
                <th>PHP</th>
                <th>Python</th>
                <th>Durum</th>
                <th>OluÅŸturulma</th>
                <th>Ä°ÅŸlemler</th>
            </tr>
        </thead>
        <tbody>
            {% for site in websites %}
            <tr>
                <td>
                    <strong>{{ site.site_name }}</strong>
                </td>
                <td>
                    <small><a href="http://{{ site.site_name }}.{{ base_domain }}:5000" target="_blank">
                        http://{{ site.site_name }}.{{ base_domain }}:5000
                    </a></small>
                </td>
                <td>{% if site.php_enabled %}âœ…{% else %}âŒ{% endif %}</td>
                <td>{% if site.python_enabled %}âœ…{% else %}âŒ{% endif %}</td>
                <td>
                    <span class="badge {% if site.status == 'active' %}badge-success{% else %}badge-danger{% endif %}">
                        {{ site.status }}
                    </span>
                </td>
                <td>{{ site.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
                <td>
                    <a href="http://{{ site.site_name }}.{{ base_domain }}:5000" target="_blank" class="btn btn-primary btn-sm">ğŸŒ</a>
                    <a href="/file-manager" onclick="selectSite({{ site.id }})" class="btn btn-success btn-sm">ğŸ“</a>
                    <a href="/toggle-site/{{ site.id }}" class="btn btn-warning btn-sm">
                        {% if site.status == 'active' %}â¸ï¸{% else %}â–¶ï¸{% endif %}
                    </a>
                    <a href="/delete-site/{{ site.id }}" class="btn btn-danger btn-sm" onclick="return confirm('Silmek istediÄŸinize emin misiniz?')">ğŸ—‘ï¸</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="text-align: center; padding: 40px;">
        HenÃ¼z site oluÅŸturmadÄ±nÄ±z. <a href="/create-site">Ä°lk sitenizi oluÅŸturun!</a>
    </p>
    {% endif %}
</div>

<script>
function selectSite(siteId) {
    localStorage.setItem('selectedSite', siteId);
}
</script>
{% endblock %}
